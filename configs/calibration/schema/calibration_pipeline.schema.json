{
  "$id": "https://spectramind.v50/schema/calibration/calibration_pipeline.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Top-level Calibration Pipeline Schema",
  "type": "object",
  "properties": {
    "version": { "type": "string", "pattern": "^v[0-9]+(\\.[0-9]+)?$" },
    "detector": { "$ref": "common_defs.schema.json#/$defs/enum_detectors" },
    "stages": {
      "type": "object",
      "properties": {
        "adc": { "$ref": "frame_corrections.schema.json#/properties/adc" },
        "bias": { "$ref": "frame_corrections.schema.json#/properties/bias" },
        "dark": { "$ref": "frame_corrections.schema.json#/properties/dark" },
        "flat": { "$ref": "frame_corrections.schema.json#/properties/flat" },
        "nonlinearity": { "$ref": "frame_corrections.schema.json#/properties/nonlinearity" },
        "ramp": { "$ref": "frame_corrections.schema.json#/properties/ramp" },
        "cosmic": { "$ref": "cosmic_ray.schema.json" },
        "photometry": { "$ref": "photometry_extraction.schema.json" },
        "trace": { "$ref": "trace_extraction.schema.json" },
        "normalize_align": { "$ref": "normalization_alignment.schema.json" },
        "uncertainty": { "$ref": "uncertainty_calibration.schema.json" },
        "validate": { "$ref": "validation_checks.schema.json" },
        "products": { "$ref": "products_manifest.schema.json" }
      },
      "additionalProperties": false
    }
  },
  "required": ["stages"],
  "additionalProperties": false
}
